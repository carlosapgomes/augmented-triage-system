<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Widget de decisao medica</title>
    <link rel="stylesheet" href="/widget/room2/styles.css">
    <script src="/widget/room2/app.js" defer></script>
  </head>
  <body>
    <main class="widget-shell">
      <header>
        <h1>Widget de decisao medica</h1>
        <p>Use este fluxo para autenticar, carregar o caso e enviar a decisao.</p>
      </header>

      <section class="card" aria-labelledby="login-title">
        <h2 id="login-title">Autenticacao</h2>
        <label for="login-email">Email</label>
        <input id="login-email" type="email" autocomplete="username" placeholder="admin@exemplo.org">

        <label for="login-password">Senha</label>
        <input id="login-password" type="password" autocomplete="current-password">

        <button id="login-button" type="button">Entrar</button>
      </section>

      <section class="card" aria-labelledby="context-title">
        <h2 id="context-title">Contexto do caso</h2>
        <label for="case-id">Case ID</label>
        <input id="case-id" type="text" placeholder="UUID do caso">

        <button id="load-case-button" type="button">Carregar caso</button>
        <pre id="case-context" class="context-box" aria-live="polite"></pre>
      </section>

      <section class="card" aria-labelledby="decision-title">
        <h2 id="decision-title">Decisao medica</h2>
        <label for="doctor-user-id">Doctor user id</label>
        <input id="doctor-user-id" type="text" placeholder="@doctor:example.org">

        <label for="decision">Decisao</label>
        <select id="decision">
          <option value="accept">accept</option>
          <option value="deny">deny</option>
        </select>

        <label for="support-flag">Support flag</label>
        <select id="support-flag">
          <option value="none">none</option>
          <option value="anesthesist">anesthesist</option>
          <option value="anesthesist_icu">anesthesist_icu</option>
        </select>

        <label for="reason">Motivo (opcional)</label>
        <textarea id="reason" rows="3" placeholder="Descreva o motivo"></textarea>

        <div class="action-row">
          <button id="submit-button" type="button">Enviar decisao</button>
          <button id="retry-button" type="button" hidden>Tentar novamente</button>
        </div>
      </section>

      <section class="card status-card" aria-live="polite">
        <h2>Status</h2>
        <p id="status-message">Aguardando autenticacao.</p>
      </section>
    </main>
  </body>
</html>
